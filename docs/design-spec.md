# my_ocr 設計仕様（MVP）

## 1. 目的
ユーザーが資料のスクリーンショットをクリップボードから貼り付けるだけで、画像内テキストをOCRで抽出し、再利用しやすい形式でコピーできるWebアプリを提供する。

## 2. 前提条件
- 配信先: GitHub Pages
- 構成: フロントエンドのみ（サーバーレス）
- 対象ユーザー: 日本語/英語のテキストを資料画像から再利用したいユーザー

## 3. スコープ
### 3.1 MVPで提供する機能
1. クリップボード画像の貼り付け
2. 貼り付け画像のプレビュー表示
3. OCR実行（日本語 + 英語）
4. 抽出テキストの表示
5. 抽出テキストのコピー
6. OCR結果の手動編集（軽微修正）

### 3.2 MVPでは提供しない機能
1. ユーザー認証
2. サーバー保存
3. 履歴管理/クラウド同期
4. 複数画像のバッチ処理
5. レイアウト保持（表/段組の完全再現）

## 4. ユーザーフロー
1. ユーザーが資料をスクリーンショットし、画像をクリップボードに保持
2. アプリを開き、貼り付けエリアで `Ctrl+V` / `Cmd+V`
3. アプリが画像を受け取りプレビュー表示
4. ユーザーが「OCR実行」を押す
5. 抽出結果テキストを表示
6. ユーザーが「コピー」で結果を再利用

## 5. 機能要件
### 5.1 画像入力
- `paste` イベントでクリップボードデータを受理する
- 画像MIME（`image/png`, `image/jpeg`, `image/webp`）のみ受け付ける
- 非対応データ時はエラーメッセージを表示する

### 5.2 OCR
- OCRエンジンはブラウザ実行型（例: `tesseract.js`）を採用
- 初期対応言語は `jpn` と `eng`
- OCR処理中はローディングと進捗を表示する

### 5.3 結果表示/再利用
- OCR結果をテキストエリアに表示
- ユーザーはテキストを編集可能
- 「コピー」ボタンでクリップボードへ転送
- コピー成功/失敗をトースト等で通知

### 5.4 エラーハンドリング
- 画像未貼り付けでOCR実行した場合は警告表示
- OCR失敗時は再実行可能な状態に戻す
- ブラウザ非対応機能（Clipboard API）を検知し代替手順を表示

## 6. 非機能要件
### 6.1 パフォーマンス
- 初回表示: 3秒以内（主要UI表示）
- 単一画像OCR: 標準的スクリーンショット（横1500px程度）で10秒以内を目標

### 6.2 可用性/運用
- GitHub Pagesの静的ホスティングで動作すること
- 依存ライブラリ更新時にGitHub Actionsでビルド確認すること

### 6.3 セキュリティ/プライバシー
- 画像/抽出テキストをサーバー送信しない（ローカル処理）
- 外部通信は静的アセット取得に限定

### 6.4 互換性
- 最新の Chrome / Edge / Safari をサポート対象
- Firefoxはベストエフォート

## 7. 画面仕様（単一ページ）
### 7.1 レイアウト要素
1. ヘッダー（アプリ名）
2. 貼り付けエリア
3. 画像プレビュー
4. 操作ボタン（OCR実行 / クリア / コピー）
5. OCR結果テキストエリア
6. ステータス表示（進捗/エラー/成功）

### 7.2 UI状態
- 初期状態: 画像未選択、OCR実行ボタン無効
- 画像貼付後: OCR実行有効
- OCR処理中: OCR実行/クリア無効、進捗表示
- OCR完了: 結果表示、コピー有効
- エラー時: 再試行可能

## 8. 技術設計
### 8.1 フロントエンド
- フレームワーク: React + TypeScript（Vite）
- 状態管理: React hooks（ローカルstate）
- スタイル: CSS ModulesまたはシンプルなグローバルCSS

### 8.2 OCR実装
- `tesseract.js` をWeb Workerで実行しメインスレッドをブロックしない
- 必要言語データを遅延ロードする
- 入力画像は必要に応じてCanvasで前処理（グレースケール/コントラスト調整）

### 8.3 デプロイ
- GitHub Actionsで `npm ci` -> `npm run build` -> Pages公開
- `vite.config.ts` の `base` をリポジトリ名に合わせる

## 9. 受け入れ基準（MVP）
1. クリップボードから画像を貼り付けできる
2. OCRで日本語/英語テキストが抽出される
3. 抽出テキストをコピーできる
4. 主要エラー時にユーザーがリカバリできるメッセージが表示される
5. GitHub Pages上で動作する

## 10. 今後拡張の候補
1. 画像ドラッグ&ドロップ対応
2. 複数画像連続処理
3. テキスト整形（改行/スペース最適化）
4. OCR結果のダウンロード（txt/csv）
5. PWA化
